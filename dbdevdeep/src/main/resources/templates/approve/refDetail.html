<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
     xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
     layout:decorate="~{include/approve_layout}">
     
 <head>
    <!-- This page plugin CSS -->
    <link th:href="@{/assets/extra-libs/datatables.net-bs4/css/dataTables.bootstrap4.css}" rel="stylesheet">
    <!-- Custom CSS -->
    <link th:href="@{/dist/css/style.min.css}" rel="stylesheet">

	<style>
		.custom-cancel-button{
			color: black !important;
		}
		
		.swal-custom-button {
		  background-color: #0031AE !important;
		  color: white; /* 버튼 텍스트 색상 */
		  border: none; /* 버튼 테두리 제거 */
		  padding: 10px 20px; /* 버튼 패딩 */
		  font-size: 16px; /* 버튼 폰트 크기 */
		  cursor: pointer; /* 마우스 커서 포인터 */
		}
		
		.swal-custom-button:hover {
		  background-color: #002685 !important;
		}
	
	</style>
</head>


<th:block layout:fragment="content">
		<div class="page-wrapper">
			<div class="container-fluid">
				<div class="col-sm-12 col-md-12">
					<div class="card">
						<div class="card-body" style="padding: 50px 80px">
							<div style="font-size: 30px; color:black;">결재 상세</div>
							<hr>
								<div class="container-fluid">
                				<div class="container">
                                <form id="approReUpFrm">
                                    <input type="hidden" id="csrf_token" th:value="${_csrf.token}">
                                    <h2 class="text-center">휴가 신청서</h2>
										<br>
										<div style="display: flex; justify-content: flex-end; align-items: flex-start;">
										
										    <!-- 협의 영역 -->
										    <div th:if="${cDto != null and #lists.size(cDto) > 0}">
										        <table border="1" style="text-align: center; width: 180px; table-layout: fixed;">
										            <tr>
										                <td rowspan="3" style="width: 50px; height: 50px;">협의</td> <!-- 셀 높이를 고정 -->
										                <th:block th:each="item : ${cDto}">
										                    <td style="width: 85px; height: 30px;" th:text="${#strings.contains(item.appro_line_name, ' ') ? item.appro_line_name.split(' ')[0] : '직원'}"></td>
										                </th:block>
										            </tr>
										            <tr>
										                <th:block th:each="item : ${cDto}">
										                    <td style="width: 85px; height: 30px;" th:text="${#strings.contains(item.appro_line_name, ' ') ? item.appro_line_name.split(' ')[1] : item.appro_line_name}"></td>
										                </th:block>
										            </tr>
										            <tr>
										                <th:block th:each="item : ${cDto}">
										                    <td style="width: 65px; height: 80px;"> <!-- 이미지 셀 높이를 넉넉히 고정 -->
										                        <span th:if="${item.appro_line_sign == '반려'}" style="color: red;">반려</span>
										                        <span th:if="${item.appro_line_sign != null and item.appro_line_sign != '' and item.appro_line_sign != '반려'}">
										                            <img th:src="@{'/signatures/' + ${item.appro_line_sign}}" alt="서명 이미지" style="max-width: 100%; max-height: 100%; object-fit: contain;"/>
										                        </span>
										                        <span th:if="${item.appro_line_sign == null or item.appro_line_sign == ''}">-</span>
										                    </td>
										                </th:block>
										            </tr>
										        </table>
										    </div>
												<div>
											    	<table>
											    	<tr><td></td><td></td><td></td><td></td></tr>
											    	</table>
											    </div>

										    <!-- 결재 영역 -->
										    <div>
										        <table border="1" style="text-align: center; width: 180px; table-layout: fixed;">
										            <tr>
										                <td rowspan="3" style="width: 50px; height: 50px;">결재</td>
										                <th:block th:each="item : ${lDto}">
										                    <td style="width: 85px; height: 30px;" th:text="${#strings.contains(item.appro_line_name, ' ') ? item.appro_line_name.split(' ')[0] : '직원'}"></td>
										                </th:block>
										            </tr>
										            <tr>
										                <th:block th:each="item : ${lDto}">
										                    <td style="width: 85px; height: 30px;" th:text="${#strings.contains(item.appro_line_name, ' ') ? item.appro_line_name.split(' ')[1] : item.appro_line_name}"></td>
										                </th:block>
										            </tr>
										            <tr>
										                <th:block th:each="item : ${lDto}">
										                    <td style="width: 65px; height: 80px;"> <!-- 이미지 셀 높이를 넉넉히 고정 -->
										                        <span th:if="${item.appro_line_sign == '반려'}" style="color: red;">반려</span>
										                        <span th:if="${item.appro_line_sign != null and item.appro_line_sign != '' and item.appro_line_sign != '반려'}">
										                            <img th:src="@{'/signatures/' + ${item.appro_line_sign}}" alt="서명 이미지" style="max-width: 100%; max-height: 100%; object-fit: contain;"/>
										                        </span>
										                        <span th:if="${item.appro_line_sign == null or item.appro_line_sign == ''}">-</span>
										                    </td>
										                </th:block>
										            </tr>
										        </table>
										    </div>
										</div>
										<br>
                                    
                                    <table class="table table-bordered">
                                        <tbody>
                                            <tr>
                                                <td>성명</td>
                                                <input type="hidden" id="approNoHidden" name="appro_no" th:value="${aDto.appro_no}">
                                                <td><input type="text" name="appro_name" th:value="${aDto.appro_name}" readonly style="border: 0; outline: none;"></td>
                                                <td>부서</td>
                                                <td>
                                                    <span th:text="${aDto.dept_code == 'D1' ? '교장' :
			                                                    		aDto.dept_code == 'D2' ? '교감'	:
			                                                    		aDto.dept_code == 'D3' ? '행정부' : '교무부'}"></span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>직원번호</td>
                                                <td>
                                                <span th:text="${aDto.emp_id}"></span>
                                                </td>
                                                <td>기안일</td>
                                                <td><span th:text="${#temporals.format(aDto.appro_time, 'yyyy.MM.dd HH:mm')}"></span></td>
                                            </tr>
                                            <tr>
                                                <td>제목</td>
                                                <td><span th:text="${aDto.appro_title}"></span></td>
                                                <td>결재 상태</td>
                                                <td>
                                                <span th:text="${aDto.appro_status == 0 ? '결제진행중' : 
                                                 				aDto.appro_status == 1 ? '승인' : '반려'}"></span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>종류</td>
                                                <td>
                                                    <span th:text="${vDto.vac_type == 0 ? '연차' :
												                 vDto.vac_type == 1 ? '공가' :
												                 vDto.vac_type == 2 ? '병가' :
												                 vDto.vac_type == 3 ? '조퇴' :
												                 vDto.vac_type == 4 ? '경조사' :
												                 vDto.vac_type == 5 ? '출산휴가' :
												                 vDto.vac_type == 6 ? '오전반차' : 
												                 vDto.vac_type == 7 ? '오후반차' : ''}"></span>
                                                </td>
                                                <td>일정</td>
                                                <td>
                                                    <span th:text="${#temporals.format(vDto.start_time, 'yyyy.MM.dd HH:mm')}"></span>&nbsp;&nbsp;~&nbsp;&nbsp;
                                                    <span th:text="${#temporals.format(vDto.end_time, 'yyyy.MM.dd HH:mm')}"></span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="vertical-align: middle;">신청사유</td>
                                                <td colspan="3"><textarea class="form-control" rows="10" style="resize: none; border: 0; outline: none; padding: 0; margin: 0;" name="appro_content" th:text="${aDto.appro_content}" readonly></textarea></td>
                                            </tr>
                                            <tr>
                                                <td colspan="4">
                                                    <div style="text-align: center;"><h4>상기와 같이 휴가를 신청하오니 검토 후 승인하여 주시기 바랍니다.</h4></div>
                                                    <br><br>
                                                    <h1 style="text-align: center;">물망초등학교</h1>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>반려사유</td>
                                                <td colspan="3">
											        <span th:if="${backReason != null}">
											            <span th:text="${backReason.appro_line_name+'('+backReason.emp_id+')'+'  -  '+ backReason.reason_back}"></span>
											        </span>
											        <span th:if="${backReason == null}"></span>
                                                </td>
                                            </tr>
								                <tr>
											    <td>협의자</td>
											    <td colspan="3">
											        <span th:if="${cDto != null}">
											            <th:block th:each="item, iterStat : ${cDto}">
											                <span th:text="${item.appro_line_name + ' (' + item.emp_id + ')'}"></span>
											                <span th:if="${!iterStat.last}"> > </span>
											            </th:block>
											        </span>
											    </td>
												</tr>
												<tr>
												    <td>결재자</td>
												    <td colspan="3">
												        <span th:if="${lDto != null}">
												            <th:block th:each="item, iterStat : ${lDto}">
												                <span th:text="${item.appro_line_name + ' (' + item.emp_id + ')'}"></span>
												                <span th:if="${!iterStat.last}"> > </span>
												            </th:block>
												        </span>
												    </td>
												</tr>
												<tr>
												    <td>참조자</td>
												    <td colspan="3">
												        <span th:if="${rDto != null}">
												            <th:block th:each="item, iterStat : ${rDto}">
												                <span th:text="${item.ref_name + ' (' + item.emp_id + ')'}"></span>
												                <span th:if="${!iterStat.last}"> > </span>
												            </th:block>
												        </span>
												    </td>
												</tr>
                                            <tr>
                                                <td>첨부파일</td>
                                                <td colspan="3">
                                                	<input type="hidden" name="file_name" th:value="${fDto != null ? fDto.ori_file : ''}">
                                                	<a th:if="${fDto != null}" th:text="${fDto.ori_file}" th:href="@{/approDownload/{no}(no=${aDto.appro_no})}" style="text-decoration:underline;"></a>
    												<span th:if="${fDto == null}"></span>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <div style="display: flex; justify-content: flex-start; align-items: center;">
                                        <div class="text-center mt-3">
                                            <!-- 목록으로 이동 -->
                                            <input type="button" value="목록" th:onclick="'history.back()'" class="btn btn-outline-secondary m-1">
                                        </div>
                                    </div>
                                </form>
                            </div>
				            </div>
						</div>
					</div>
				</div>
			</div>
			<footer class="footer text-center text-muted"> All Rights Reserved by Adminmart. Designed by DBDevDeep and Developed by WrapPixel.</footer>
			
		</div>
	
	<script th:src="@{/assets/libs/jquery/dist/jquery.min.js}"></script>
	<!-- Bootstrap tether Core JavaScript -->
	<script th:src="@{/assets/libs/popper.js/dist/umd/popper.min.js}"></script>
	<script th:src="@{/assets/libs/bootstrap/dist/js/bootstrap.min.js}"></script>
	<!-- apps -->
	<!-- apps -->
	<script src="/dist/js/app-style-switcher.js"></script>
	<script src="/dist/js/feather.min.js"></script>
	<!-- slimscrollbar scrollbar JavaScript -->
	<script src="/assets/libs/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js"></script>
	<script src="/assets/extra-libs/sparkline/sparkline.js"></script>
	<!--Wave Effects -->
	<!-- themejs -->
	<!--Menu sidebar -->
	<script src="/dist/js/sidebarmenu.js"></script>
	<!--Custom JavaScript -->
	<script src="/dist/js/custom.min.js"></script>
	<script src="/assets/extra-libs/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="/dist/js/pages/datatable/datatable-basic.init.js"></script>
    
    	
</th:block>
</html>